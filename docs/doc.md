### 协议

**\* 协议字段均采用小端序**

#### 协议头

```
 0               1               2               3
 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7
+---------------------------------------------------------------+
| MessageType   |                 Messages...                   |
+---------------------------------------------------------------+

```

#### MessageType

通过uint8表示消息的类型

##### 1 ：世界位置原始信息

消息体如下：

**标识符：**

- 1 : 摄像机
- 2 : 玩家
- 3 : 更新玩家操作的角色的ID
- 4 : 子弹
- 5 : 资源方块

**摄像机:**

- uint8: 标识符（1）

- float: 摄像机中心坐标 X
- float: 摄像机中心坐标 Y
- uint16:一米表示的像素宽度

**玩家：**

- uint8: 标识符（2）
- uint64: 玩家ID

- int32：所属碰撞组

- int32: 玩家的血量
- int32: 玩家的血量上限
- int32: 玩家的金币
- int32: 玩家的得分
- [几何体](#shape): 代表玩家的几何体
- [炮管](#barrel): 玩家的所有炮管

**更新玩家操作的角色的ID：**

- uint8: 标识符（3）
- uint64: 玩家ID

**子弹：**

- uint8：标识符（4）

- int32：所属碰撞组
- [几何体](#shape)：代表子弹的几何体

**资源方块：**

- uint8：标识符（5）
- int32:  障碍物的血量
- int32:  障碍物的血量上限
- int32:  障碍物的金币
- int32:  障碍物的得分
- [几何体](#shape)：代表障碍物的几何体



**几何体<a name="shape"></a>：**

- 类型:
- 通过uint8表示物体的类型

-   - 0 : 圆形
    - 1 : 正三角形
    - 2 : 正方形
    - 3 : 长方形
    - 4 : 正五边形

-   float: 物体质心的 X 轴坐标值

-   float: 物体质心的 Y 轴坐标值

-   float: 物体质心的旋转角度(弧度制)

-   float: 物体的属性	


| 形状                 | 属性                      |
| -------------------- | ------------------------- |
| 圆形                 | 半径(float)               |
| 正三角形             | 边长(float)               |
| 正方形               | 边长(float)               |
| 长方形               | 宽度(float) ，高度(float) |
| 正五边形(用圆形近似) | 内切圆半径(float)         |

**炮管<a name="barrel"></a>：**

- float：宽度
- float：长度
- float：角度

##### 2 ：玩家交互信息

消息体如下：

```
 0               1               2               3
 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7
+---------------------------------------------------------------+
| OperationType |                 messages...                   |
+---------------------------------------------------------------+
```
**OperationType: **

通过uint8表示交互的类型

- 0 : 玩家操作
  - 鼠标在物理世界中的位置(X,Y)(float)
  - uint64按键释放按下
  - 0          1         2    3    4    5
  - [左键，右键，W，A，S，D ]

- 1 : 新建初始角色：无参数

- 2 : 角色死亡消息：无参数

**3 ：Ping** 